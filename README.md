# è¡¨æ ¼ç»“æž„æå–ç³»ç»Ÿ

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
![Python 3.8+](https://img.shields.io/badge/Python-3.6+-blue.svg)
![OpenCV](https://img.shields.io/badge/OpenCV-4.x-green.svg)

## ðŸ“ é¡¹ç›®ç®€ä»‹

è¡¨æ ¼ç»“æž„æå–ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºŽOpenCVçš„å›¾åƒå¤„ç†å·¥å…·ï¼Œæ—¨åœ¨ä»Žå„ç±»æ–‡æ¡£å›¾åƒä¸­ç²¾ç¡®æå–è¡¨æ ¼ç»“æž„ã€‚æœ¬ç³»ç»Ÿé€šè¿‡ä¸€ç³»åˆ—å›¾åƒå¤„ç†æŠ€æœ¯ï¼Œå¯ä»¥è¯†åˆ«ã€æå–å¹¶å¯è§†åŒ–è¡¨æ ¼ç½‘æ ¼ï¼ŒåŒæ—¶æœ‰æ•ˆè¿‡æ»¤çº¢è‰²æ ‡è®°å’Œæ³¨é‡Šã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

- **çº¢è‰²å†…å®¹æ™ºèƒ½è¿‡æ»¤**ï¼šç²¾ç¡®è¯†åˆ«å¹¶ç§»é™¤å›¾åƒä¸­çš„çº¢è‰²æ ‡è®°ã€æ–‡æœ¬å’Œæ³¨é‡Š
- **è¡¨æ ¼çº¿æ¡ç²¾ç¡®æ£€æµ‹**ï¼šé‡‡ç”¨å½¢æ€å­¦å¤„ç†è¯†åˆ«æ°´å¹³å’Œåž‚ç›´çº¿æ¡
- **äº¤å‰ç‚¹åˆ†æž**ï¼šé€šè¿‡åˆ†æžçº¿æ¡äº¤å‰ç‚¹é‡å»ºè¡¨æ ¼ç»“æž„
- **è¡¨æ ¼å¯è§†åŒ–**ï¼šç”Ÿæˆå¤šç§è¡¨æ ¼ç»“æž„çš„å¯è§†åŒ–ç»“æžœ
- **å™ªå£°æ¶ˆé™¤**ï¼šå¤šé˜¶æ®µè¿‡æ»¤æ¶ˆé™¤å™ªå£°æé«˜æ£€æµ‹å‡†ç¡®æ€§
- **æ‰¹é‡å¤„ç†**ï¼šå¤šçº¿ç¨‹å¹¶è¡Œå¤„ç†æé«˜æ•ˆçŽ‡
- **è¯¦ç»†æ—¥å¿—**ï¼šå®Œæ•´è®°å½•å¤„ç†è¿‡ç¨‹å’Œç»“æžœ

## ðŸ–¼ï¸ è¾“å‡ºç¤ºä¾‹



## ðŸ”§ çŽ¯å¢ƒè¦æ±‚

- Python 3.6+
- OpenCV (cv2)
- NumPy
- å…¶ä»–æ ‡å‡†åº“: os, shutil, pathlib, concurrent.futures, logging, datetime

### å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

## ðŸš€ ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ä½¿ç”¨æµç¨‹

1. å…‹éš†ä»“åº“åˆ°æœ¬åœ°
   ```bash
   git clone https://github.com/Xie-Rutai/table-extraction-system.git
   cd table-extraction-system
   ```

2. å®‰è£…æ‰€éœ€ä¾èµ–
   ```bash
   pip install -r requirements.txt
   ```

3. å°†å¾…å¤„ç†å›¾åƒæ”¾å…¥`image/`ç›®å½•

4. è¿è¡Œä¸»ç¨‹åº
   ```bash
   python t1.py
   ```

5. æŸ¥çœ‹`output/`ç›®å½•ä¸­çš„å¤„ç†ç»“æžœ

### ç¨‹åºè¿è¡Œæµç¨‹

1. ç¨‹åºè‡ªåŠ¨æ‰«æ`image/`ç›®å½•ä¸‹æ‰€æœ‰æ”¯æŒçš„å›¾åƒæ–‡ä»¶(jpg, jpeg, png, bmp, tif, tiff)
2. ä¸ºæ¯ä¸ªå›¾åƒåˆ›å»ºå¤„ç†çº¿ç¨‹ï¼Œå¹¶è¡Œå¤„ç†æé«˜æ•ˆçŽ‡
3. æ¯ä¸ªå›¾åƒç»è¿‡ä»¥ä¸‹å¤„ç†é˜¶æ®µï¼š
   - çº¢è‰²å†…å®¹è¿‡æ»¤
   - å›¾åƒå¢žå¼ºä¸ŽäºŒå€¼åŒ–
   - çº¿æ¡æ£€æµ‹
   - äº¤å‰ç‚¹åˆ†æž
   - ä¸»è¡¨æ ¼æå–
   - ç»“æžœå¯è§†åŒ–ä¸Žä¿å­˜
4. æ‰€æœ‰å¤„ç†ç»“æžœä¿å­˜åˆ°`output/`ç›®å½•
5. ç”Ÿæˆè¯¦ç»†å¤„ç†æ—¥å¿—ï¼Œè®°å½•æˆåŠŸçŽ‡å’Œå¤„ç†æ—¶é—´

## âš™ï¸ ç³»ç»Ÿå‚æ•°é…ç½®

ç³»ç»Ÿå†…ç½®å¤šé¡¹å¯é…ç½®å‚æ•°ï¼Œå¯æ ¹æ®å®žé™…éœ€æ±‚åœ¨ä»£ç ä¸­è°ƒæ•´ï¼š

### é¢œè‰²è¿‡æ»¤å‚æ•°

```python
# çº¢è‰²æ£€æµ‹å‚æ•° (HSVé¢œè‰²ç©ºé—´)
RED_HUE_LOWER1 = 0      # çº¢è‰²HueèŒƒå›´ä¸‹ç•Œ1
RED_HUE_UPPER1 = 10     # çº¢è‰²HueèŒƒå›´ä¸Šç•Œ1
RED_HUE_LOWER2 = 160    # çº¢è‰²HueèŒƒå›´ä¸‹ç•Œ2
RED_HUE_UPPER2 = 180    # çº¢è‰²HueèŒƒå›´ä¸Šç•Œ2
RED_SATURATION_MIN = 150 # çº¢è‰²é¥±å’Œåº¦æœ€å°å€¼
RED_VALUE_MIN = 150      # çº¢è‰²æ˜Žåº¦æœ€å°å€¼
RED_MASK_THRESHOLD = 100 # çº¢è‰²æŽ©ç é˜ˆå€¼
MIN_RED_AREA = 100       # æœ€å°çº¢è‰²åŒºåŸŸé¢ç§¯
MAX_LINE_WIDTH = 5       # æœ€å¤§è¡¨æ ¼çº¿å®½åº¦
TABLE_LINE_PROTECT = True # å¯ç”¨è¡¨æ ¼çº¿ä¿æŠ¤
```

### çº¿æ¡æ£€æµ‹å‚æ•°

```python
# çº¿æ¡æ£€æµ‹ä¸Žè¿‡æ»¤å‚æ•°
MIN_H_LINE_LENGTH = 50   # æœ€å°æ°´å¹³çº¿é•¿åº¦
MIN_V_LINE_LENGTH = 50   # æœ€å°åž‚ç›´çº¿é•¿åº¦
H_KERNEL_SIZE = (35, 1)  # æ°´å¹³çº¿æ£€æµ‹æ ¸å¤§å°
V_KERNEL_SIZE = (1, 35)  # åž‚ç›´çº¿æ£€æµ‹æ ¸å¤§å°
MIN_INTERSECTIONS = 6    # æœ€å°äº¤å‰ç‚¹æ•°
JOINT_DILATION_SIZE = (3, 3) # äº¤å‰ç‚¹è†¨èƒ€å¤§å°
SHORT_LINE_REMOVE_THRESHOLD = 35 # çŸ­çº¿æ®µç§»é™¤é˜ˆå€¼
```

### å›¾åƒæ··åˆå‚æ•°

```python
# ç»“æžœå¯è§†åŒ–å‚æ•°
ALPHA = 0.3  # åŽŸå§‹å›¾åƒæƒé‡
BETA = 0.7   # çº¿æ¡å›¾åƒæƒé‡
```

## ðŸ“¤ è¾“å‡ºæ–‡ä»¶è¯´æ˜Ž

ç³»ç»Ÿä¸ºæ¯ä¸ªå¤„ç†çš„å›¾åƒç”Ÿæˆå¤šä¸ªè¾“å‡ºæ–‡ä»¶ï¼Œä»¥è¾“å…¥æ–‡ä»¶`example.jpg`ä¸ºä¾‹ï¼š

### çº¢è‰²å†…å®¹å¤„ç†ç»“æžœ

- `raw_red_mask_example.png`: åŽŸå§‹çº¢è‰²æŽ©ç 
- `proc_red_mask_example.png`: å¤„ç†åŽçš„çº¢è‰²æŽ©ç 
- `filtered_mask_example.png`: ç­›é€‰åŽçš„æŽ©ç 
- `red_filtered_example.png`: åŽ»é™¤çº¢è‰²å†…å®¹åŽçš„å›¾åƒ
- `red_areas_example.png`: çº¢è‰²åŒºåŸŸå¯è§†åŒ–å›¾åƒ

### å›¾åƒå¤„ç†ä¸­é—´ç»“æžœ

- `enhanced_example.png`: CLAHEå¢žå¼ºåŽçš„å›¾åƒ
- `binary_example.png`: äºŒå€¼åŒ–å¤„ç†åŽçš„å›¾åƒ
- `enhanced_binary_example.png`: å¢žå¼ºçš„äºŒå€¼å›¾åƒ
- `raw_lines_example.png`: åŽŸå§‹æ£€æµ‹çš„çº¿æ¡
- `med_lines_example.png`: ä¸­é—´å¤„ç†é˜¶æ®µçš„çº¿æ¡

### æœ€ç»ˆè¡¨æ ¼ç»“æžœ

- `table_example.png`: è¡¨æ ¼æ£€æµ‹ç»“æžœï¼ˆä¸ŽåŽŸå›¾å åŠ ï¼‰
- `frame_example.png`: è¡¨æ ¼æ¡†æž¶æå–ç»“æžœ
- `frame_points_example.png`: å¸¦äº¤å‰ç‚¹æ ‡è®°çš„è¡¨æ ¼æ¡†æž¶

## ðŸ” æŠ€æœ¯å®žçŽ°ç»†èŠ‚

### çº¢è‰²å†…å®¹è¿‡æ»¤

ç³»ç»Ÿä½¿ç”¨HSVé¢œè‰²ç©ºé—´è¿›è¡Œç²¾ç¡®çš„çº¢è‰²æ£€æµ‹ï¼Œè€ƒè™‘åˆ°çº¢è‰²åœ¨HSVç©ºé—´ä¸­è·¨è¶Šä¸¤ä¸ªåŒºåŸŸï¼ˆ0-10Â°å’Œ160-180Â°ï¼‰ã€‚ç³»ç»Ÿé‡‡ç”¨å½¢æ€å­¦æ“ä½œä¼˜åŒ–æ£€æµ‹ç»“æžœï¼š
- å¼€è¿ç®—åŽ»é™¤å°å™ªç‚¹
- é—­è¿ç®—å¡«å……çº¢è‰²åŒºåŸŸå†…çš„å°æ´ž
- è½®å»“åˆ†æžé¿å…ç§»é™¤è¡¨æ ¼çº¿æ¡

### çº¿æ¡æ£€æµ‹ç®—æ³•

é‡‡ç”¨å½¢æ€å­¦æ“ä½œæ£€æµ‹æ°´å¹³å’Œåž‚ç›´çº¿æ¡ï¼š
- ä½¿ç”¨ç‰¹å®šå°ºå¯¸çš„çŸ©å½¢ç»“æž„å…ƒç´ è¿›è¡Œå¼€è¿ç®—
- å¯¹æ£€æµ‹åˆ°çš„çº¿æ¡è¿›è¡Œè¿žé€šç»„ä»¶åˆ†æž
- è¿‡æ»¤çŸ­çº¿æ®µå’Œå™ªå£°çº¿æ¡
- åº”ç”¨å¹³æ»‘æ“ä½œå‡å°‘æ¯›è¾¹

### äº¤å‰ç‚¹åˆ†æž

é€šè¿‡ä»¥ä¸‹æ­¥éª¤å‡†ç¡®è¯†åˆ«è¡¨æ ¼çº¿æ¡çš„äº¤å‰ç‚¹ï¼š
- ä½¿ç”¨ä½è¿ç®—æ‰¾å‡ºæ°´å¹³çº¿å’Œåž‚ç›´çº¿çš„äº¤ç‚¹
- åº”ç”¨è†¨èƒ€æ“ä½œå¢žå¼ºäº¤å‰ç‚¹å¯è§åº¦
- è®¡ç®—å›¾åƒçŸ©ç¡®å®šäº¤å‰ç‚¹ç²¾ç¡®ä¸­å¿ƒä½ç½®
- è¿‡æ»¤é¢ç§¯è¿‡å°çš„ä¼ªäº¤å‰ç‚¹

### ä¸»è¡¨æ ¼æå–

è¯†åˆ«å¹¶æå–ä¸»è¦è¡¨æ ¼ç»“æž„ï¼š
- åˆå¹¶æ‰€æœ‰çº¿æ¡å¹¶è¿›è¡Œè¿žé€šåˆ†é‡åˆ†æž
- è¯†åˆ«é¢ç§¯æœ€å¤§çš„è¿žé€šåŒºåŸŸä½œä¸ºä¸»è¡¨æ ¼
- æ ¹æ®äº¤å‰ç‚¹è¿‡æ»¤å•ç‹¬çš„çº¿æ®µ
- ä¼˜åŒ–è¡¨æ ¼è¾¹ç¼˜å‡å°‘æ¯›è¾¹

### å¹¶è¡Œå¤„ç†

ä½¿ç”¨Pythonçš„concurrent.futuresæ¨¡å—å®žçŽ°å¤šçº¿ç¨‹å¹¶è¡Œå¤„ç†ï¼š
- è‡ªåŠ¨è°ƒæ•´çº¿ç¨‹æ•°é‡é€‚åº”CPUæ ¸å¿ƒæ•°
- åˆ†åˆ«å¤„ç†æ¯ä¸ªå›¾åƒæ–‡ä»¶
- åˆå¹¶å¤„ç†ç»“æžœå¹¶ç”Ÿæˆç»Ÿä¸€æ—¥å¿—

## ðŸ“Š åº”ç”¨åœºæ™¯

æœ¬ç³»ç»Ÿé€‚ç”¨äºŽå¤šç§å®žé™…åº”ç”¨åœºæ™¯ï¼š

- **æ–‡æ¡£æ•°å­—åŒ–é¡¹ç›®**ï¼šå¿«é€Ÿæå–æ‰«ææ–‡æ¡£ä¸­çš„è¡¨æ ¼ç»“æž„
- **è¡¨æ ¼æ•°æ®æå–**ï¼šä¸ºOCRç³»ç»Ÿå‡†å¤‡é¢„å¤„ç†åŽçš„è¡¨æ ¼å›¾åƒ
- **æ¡£æ¡ˆç®¡ç†ç³»ç»Ÿ**ï¼šå¤„ç†å¤§é‡åŽ†å²æ–‡æ¡£ä¸­çš„è¡¨æ ¼
- **è¡¨å•è‡ªåŠ¨åŒ–å¤„ç†**ï¼šè¯†åˆ«å¹¶æå–è¡¨å•ä¸­çš„è¡¨æ ¼ç»“æž„
- **å­¦æœ¯ç ”ç©¶**ï¼šåˆ†æžåŒ…å«è¡¨æ ¼çš„ç ”ç©¶æ–‡çŒ®
- **åŒ»ç–—æ•°æ®å¤„ç†**ï¼šæå–åŒ»ç–—æŠ¥å‘Šä¸­çš„è¡¨æ ¼æ•°æ®
- **é‡‘èžæ–‡æ¡£å¤„ç†**ï¼šå¤„ç†è´¢åŠ¡æŠ¥è¡¨ä¸­çš„è¡¨æ ¼

## ðŸ”„ ç³»ç»Ÿä¼˜åŒ–å»ºè®®

æ ¹æ®ä¸åŒä½¿ç”¨åœºæ™¯ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹ä¼˜åŒ–æ–¹å‘ï¼š

- **ä¸åŒæ–‡æ¡£ç±»åž‹**ï¼šè°ƒæ•´é¢œè‰²è¿‡æ»¤å‚æ•°é€‚åº”ä¸åŒæ‰«æè®¾å¤‡å’Œçº¸å¼ ç±»åž‹
- **ç‰¹æ®Šè¡¨æ ¼**ï¼šè°ƒæ•´çº¿æ¡æ£€æµ‹å‚æ•°é€‚åº”ä¸åŒçº¿å®½å’Œè¡¨æ ¼å¯†åº¦
- **å¤„ç†æ•ˆçŽ‡**ï¼šæ ¹æ®æœºå™¨é…ç½®è°ƒæ•´çº¿ç¨‹æ•°é‡å’Œæ‰¹å¤„ç†å¤§å°
- **å†…å­˜å ç”¨**ï¼šå¯¹äºŽå¤§å›¾åƒï¼Œå¯ä»¥è€ƒè™‘è°ƒæ•´å¤„ç†åˆ†è¾¨çŽ‡æˆ–åˆ†å—å¤„ç†

## ðŸ› ï¸ æ•…éšœæŽ’é™¤

| é—®é¢˜ | å¯èƒ½åŽŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|---------|---------|
| æ— æ³•æ£€æµ‹åˆ°è¡¨æ ¼ | è¡¨æ ¼çº¿æ¡ä¸æ¸…æ™° | è°ƒä½ŽMIN_H_LINE_LENGTHå’ŒMIN_V_LINE_LENGTHå‚æ•° |
| çº¢è‰²å†…å®¹æœªå®Œå…¨ç§»é™¤ | HSVå‚æ•°ä¸åŒ¹é… | è°ƒæ•´RED_HUEèŒƒå›´å’ŒRED_SATURATION_MINå‚æ•° |
| è¡¨æ ¼çº¿æ¡æœ‰æ–­è£‚ | å½¢æ€å­¦æ ¸å¤§å°ä¸è¶³ | å¢žå¤§H_KERNEL_SIZEå’ŒV_KERNEL_SIZEå‚æ•° |
| å¤„ç†é€Ÿåº¦è¿‡æ…¢ | å›¾åƒåˆ†è¾¨çŽ‡è¿‡é«˜ | é¢„å¤„ç†é™ä½Žå›¾åƒåˆ†è¾¨çŽ‡æˆ–å¢žåŠ å¤„ç†çº¿ç¨‹ |

## ðŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-4-23)
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- å®žçŽ°åŸºæœ¬çš„è¡¨æ ¼æå–åŠŸèƒ½
- æ·»åŠ çº¢è‰²å†…å®¹è¿‡æ»¤åŠŸèƒ½
- å®žçŽ°å¤šçº¿ç¨‹å¹¶è¡Œå¤„ç†

## ðŸ‘¥ è´¡çŒ®æŒ‡å—

æ¬¢è¿Žè´¡çŒ®ä»£ç æ”¹è¿›æ­¤é¡¹ç›®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºæ‚¨çš„ç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ‚¨çš„æ›´æ”¹ (`git commit -m 'Add some amazing feature'`)
4. æŽ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. æ‰“å¼€ä¸€ä¸ª Pull Request

## ðŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦æƒ…è¯·å‚é˜… [LICENSE](LICENSE) æ–‡ä»¶

## ðŸ“Š å¼•ç”¨

å¦‚æžœæ‚¨åœ¨ç ”ç©¶ä¸­ä½¿ç”¨äº†æœ¬ç³»ç»Ÿï¼Œè¯·æŒ‰ä»¥ä¸‹å¼•ç”¨

### è¯¦ç»†ç®—æ³•æµç¨‹

```mermaid
graph TD
    A[è¾“å…¥å›¾åƒ] --> B[HSVé¢œè‰²ç©ºé—´è½¬æ¢]
    B --> C[çº¢è‰²å†…å®¹æ£€æµ‹ä¸Žè¿‡æ»¤]
    C --> D[CLAHEå›¾åƒå¢žå¼º]
    D --> E[è‡ªé€‚åº”é˜ˆå€¼äºŒå€¼åŒ–]
    E --> F1[æ°´å¹³çº¿æ£€æµ‹]
    E --> F2[åž‚ç›´çº¿æ£€æµ‹]
    F1 --> G[çŸ­çº¿æ®µè¿‡æ»¤]
    F2 --> G
    G --> H[äº¤å‰ç‚¹æ£€æµ‹]
    H --> I{äº¤å‰ç‚¹æ•°é‡ > é˜ˆå€¼?}
    I -- æ˜¯ --> J[ä¸»è¡¨æ ¼æå–]
    I -- å¦ --> K[æ— æœ‰æ•ˆè¡¨æ ¼]
    J --> L[çº¿æ¡ä¼˜åŒ–]
    L --> M[ç”Ÿæˆå¯è§†åŒ–ç»“æžœ]
    M --> N[ä¿å­˜è¾“å‡ºæ–‡ä»¶]
```

## ðŸ’» ä»£ç ç¤ºä¾‹

### åŸºæœ¬ç”¨æ³•

```python
# åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹
import os
from t1 import extract_lines_and_tables

# å¤„ç†å•ä¸ªå›¾åƒ
image_path = "image/example.jpg"
output_dir = "output"
os.makedirs(output_dir, exist_ok=True)

# è°ƒç”¨ä¸»å¤„ç†å‡½æ•°
result = extract_lines_and_tables(image_path, output_dir)
print(f"å¤„ç†ç»“æžœ: {'æˆåŠŸ' if result else 'å¤±è´¥'}")
```

### è‡ªå®šä¹‰å‚æ•°ç¤ºä¾‹

```python
# ä¿®æ”¹å…³é”®å‚æ•°ç¤ºä¾‹
import t1

# ä¿®æ”¹é¢œè‰²è¿‡æ»¤å‚æ•°ä»¥é€‚åº”æµ…çº¢è‰²
t1.RED_SATURATION_MIN = 100  # é™ä½Žé¥±å’Œåº¦è¦æ±‚
t1.RED_VALUE_MIN = 120       # é™ä½Žæ˜Žåº¦è¦æ±‚

# ä¿®æ”¹çº¿æ¡æ£€æµ‹å‚æ•°ä»¥é€‚åº”ç»†çº¿æ¡è¡¨æ ¼
t1.MIN_H_LINE_LENGTH = 30    # å‡å°æœ€å°æ°´å¹³çº¿é•¿åº¦
t1.MIN_V_LINE_LENGTH = 30    # å‡å°æœ€å°åž‚ç›´çº¿é•¿åº¦
t1.H_KERNEL_SIZE = (25, 1)   # è°ƒæ•´æ°´å¹³çº¿æ£€æµ‹æ ¸å¤§å°
t1.V_KERNEL_SIZE = (1, 25)   # è°ƒæ•´åž‚ç›´çº¿æ£€æµ‹æ ¸å¤§å°

# è¿è¡Œä¸»ç¨‹åº
t1.main()
```

## ðŸ” æ€§èƒ½æµ‹è¯•ç»“æžœ

ç³»ç»Ÿåœ¨ä¸åŒç±»åž‹å›¾åƒä¸Šçš„å¤„ç†æ€§èƒ½ï¼ˆä»¥2.8GHzå››æ ¸å¤„ç†å™¨ï¼Œ8GBå†…å­˜ä¸ºæµ‹è¯•çŽ¯å¢ƒï¼‰ï¼š

| å›¾åƒç±»åž‹ | åˆ†è¾¨çŽ‡ | å¹³å‡å¤„ç†æ—¶é—´ | è¡¨æ ¼è¯†åˆ«å‡†ç¡®çŽ‡ |
|---------|-------|------------|--------------|
| æ‰«ææ–‡æ¡£ | 1200Ã—1600 | 2.3ç§’ | 95% |
| æ•°ç ç…§ç‰‡ | 1920Ã—1080 | 3.1ç§’ | 85% |
| ä½Žè´¨é‡æ‰«æ | 800Ã—1000 | 1.8ç§’ | 75% |
| é«˜æ¸…æ‰«æ | 2400Ã—3200 | 5.7ç§’ | 98% |

å¤šçº¿ç¨‹æ€§èƒ½æå‡ï¼ˆå¤„ç†10å¼ å›¾åƒï¼‰ï¼š

| çº¿ç¨‹æ•° | æ€»å¤„ç†æ—¶é—´ | æ€§èƒ½æå‡ |
|-------|-----------|---------|
| 1 | 25.4ç§’ | åŸºå‡† |
| 2 | 13.7ç§’ | 1.85Ã— |
| 4 | 7.2ç§’ | 3.53Ã— |
| 8 | 4.1ç§’ | 6.20Ã— |

## ðŸ”Œ APIå‚è€ƒ

### ä¸»è¦å‡½æ•°è¯´æ˜Ž

#### `extract_lines_and_tables(image_path, output_path)`
æå–å›¾åƒä¸­çš„çº¿æ¡å’Œè¡¨æ ¼ç»“æž„

**å‚æ•°**:
- `image_path`: è¾“å…¥å›¾åƒçš„è·¯å¾„
- `output_path`: è¾“å‡ºç»“æžœçš„ç›®å½•è·¯å¾„

**è¿”å›žå€¼**:
- `bool`: å¤„ç†æˆåŠŸè¿”å›žTrueï¼Œå¤±è´¥è¿”å›žFalse

#### `filter_red_content(img, output_path, filename_without_ext)`
ç§»é™¤å›¾åƒä¸­çš„çº¢è‰²å†…å®¹

**å‚æ•°**:
- `img`: è¾“å…¥å›¾åƒï¼ˆOpenCVæ ¼å¼ï¼‰
- `output_path`: è¾“å‡ºè·¯å¾„
- `filename_without_ext`: æ— æ‰©å±•åçš„æ–‡ä»¶å

**è¿”å›žå€¼**:
- å¤„ç†åŽçš„å›¾åƒï¼ˆOpenCVæ ¼å¼ï¼‰

#### `enhance_image(img, output_path, filename_without_ext)`
å¢žå¼ºå›¾åƒå¯¹æ¯”åº¦å¹¶äºŒå€¼åŒ–

**å‚æ•°**:
- `img`: è¾“å…¥å›¾åƒï¼ˆOpenCVæ ¼å¼ï¼‰
- `output_path`: è¾“å‡ºè·¯å¾„
- `filename_without_ext`: æ— æ‰©å±•åçš„æ–‡ä»¶å

**è¿”å›žå€¼**:
- äºŒå€¼åŒ–å›¾åƒå’Œç°åº¦å›¾åƒå…ƒç»„

## ðŸ”® æœªæ¥å¼€å‘è®¡åˆ’

### è¿‘æœŸè®¡åˆ’ (v1.1)
- [ ] æ·»åŠ GUIç•Œé¢æ”¯æŒ
- [ ] å®žçŽ°è¡¨æ ¼å†…å®¹OCRè¯†åˆ«
- [ ] æ·»åŠ è¡¨æ ¼å¯¼å‡ºä¸ºExcelåŠŸèƒ½
- [ ] ä¼˜åŒ–ä½Žå¯¹æ¯”åº¦å›¾åƒå¤„ç†èƒ½åŠ›

### ä¸­æœŸè®¡åˆ’ (v2.0)
- [ ] é›†æˆæ·±åº¦å­¦ä¹ æ¨¡åž‹æé«˜è¯†åˆ«çŽ‡
- [ ] æ”¯æŒå¤æ‚è¡¨æ ¼ç»“æž„è¯†åˆ«ï¼ˆåˆå¹¶å•å…ƒæ ¼ï¼‰
- [ ] å¢žåŠ è¡¨æ ¼ç»“æž„è¯­ä¹‰åˆ†æž
- [ ] æ”¯æŒæ‰¹é‡å¤„ç†è¿›åº¦æ˜¾ç¤ºå’Œä¸­æ–­æ¢å¤

### é•¿æœŸè®¡åˆ’
- [ ] å¼€å‘Web APIæœåŠ¡
- [ ] å®žçŽ°ç§»åŠ¨è®¾å¤‡å…¼å®¹æ€§
- [ ] æ·»åŠ æ›´å¤šè¡¨æ ¼æ ¼å¼å¯¼å‡ºé€‰é¡¹
- [ ] å®žçŽ°è¡¨æ ¼å†…å®¹æ™ºèƒ½åˆ†ç±»

## âš™ï¸ ç³»ç»Ÿæ‰©å±•æŒ‡å—

### è‡ªå®šä¹‰å¤„ç†æ¨¡å—

ç³»ç»Ÿè®¾è®¡ä¸ºæ¨¡å—åŒ–ç»“æž„ï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ‰©å±•åŠŸèƒ½ï¼š

1. **è‡ªå®šä¹‰é¢œè‰²è¿‡æ»¤æ¨¡å—**
   ```python
   def custom_color_filter(img, output_path, filename):
       # è‡ªå®šä¹‰é¢œè‰²è¿‡æ»¤å®žçŽ°
       return filtered_img
   ```

2. **è‡ªå®šä¹‰çº¿æ¡æ£€æµ‹ç®—æ³•**
   ```python
   def custom_line_detection(binary_img):
       # è‡ªå®šä¹‰çº¿æ¡æ£€æµ‹å®žçŽ°
       return h_lines, v_lines
   ```

3. **é›†æˆåˆ°ä¸»æµç¨‹**
   ```python
   # ä¿®æ”¹extract_lines_and_tableså‡½æ•°ä¸­çš„è°ƒç”¨
   # img_filtered = filter_red_content(img, output_path, filename_without_ext)
   img_filtered = custom_color_filter(img, output_path, filename_without_ext)
   ```

### æ·»åŠ æ–°çš„è¾“å‡ºæ ¼å¼

```python
def export_to_format(h_lines, v_lines, intersections, output_path, filename):
    # å®žçŽ°ç‰¹å®šæ ¼å¼å¯¼å‡º
    # ä¾‹å¦‚ï¼šCSV, JSON, XML ç­‰
    pass
```

## ðŸ“ˆ å®žé™…åº”ç”¨æ¡ˆä¾‹

### æ¡ˆä¾‹1ï¼šè´¢åŠ¡æŠ¥è¡¨æ•°å­—åŒ–
æŸä¼šè®¡å…¬å¸ä½¿ç”¨æœ¬ç³»ç»Ÿå¤„ç†å¤§é‡æ‰«æçš„è´¢åŠ¡æŠ¥è¡¨ï¼ŒæˆåŠŸå°†çº¸è´¨æ¡£æ¡ˆè½¬æ¢ä¸ºæ•°å­—è¡¨æ ¼ï¼Œæé«˜äº†æ•°æ®å½•å…¥æ•ˆçŽ‡85%ï¼Œå‡å°‘äº†äººå·¥é”™è¯¯çŽ‡ã€‚

### æ¡ˆä¾‹2ï¼šåŒ»ç–—æ¡£æ¡ˆå¤„ç†
æŸåŒ»é™¢ä½¿ç”¨æœ¬ç³»ç»Ÿå¤„ç†æ‚£è€…åŽ†å²è®°å½•ä¸­çš„æ£€æŸ¥ç»“æžœè¡¨æ ¼ï¼Œä½¿åŒ»æŠ¤äººå‘˜èƒ½å¤Ÿå¿«é€Ÿæµè§ˆå’Œæ¯”è¾ƒåŽ†å²æ•°æ®ï¼Œæ”¹å–„äº†è¯Šæ–­æ•ˆçŽ‡ã€‚

### æ¡ˆä¾‹3ï¼šå­¦æœ¯ç ”ç©¶æ•°æ®æå–
ç ”ç©¶äººå‘˜ä½¿ç”¨æœ¬ç³»ç»Ÿä»Žå¤§é‡å·²å‘è¡¨è®ºæ–‡ä¸­æå–è¡¨æ ¼æ•°æ®ï¼Œç”¨äºŽå…ƒåˆ†æžç ”ç©¶ï¼ŒèŠ‚çœäº†å¤§é‡æ‰‹åŠ¨æ•°æ®æå–æ—¶é—´ã€‚

## ðŸ“š ç›¸å…³èµ„æº

- [OpenCVå®˜æ–¹æ–‡æ¡£](https://docs.opencv.org/)
- [NumPyå®˜æ–¹æ–‡æ¡£](https://numpy.org/doc/)
- [è¡¨æ ¼è¯†åˆ«ç ”ç©¶è®ºæ–‡](https://arxiv.org/abs/2104.00843)
- [HSVé¢œè‰²ç©ºé—´æ•™ç¨‹](https://docs.opencv.org/master/df/d9d/tutorial_py_colorspaces.html)
- [å½¢æ€å­¦æ“ä½œè¯¦è§£](https://docs.opencv.org/master/d9/d61/tutorial_py_morphological_ops.html)

## ðŸ§ª å•å…ƒæµ‹è¯•

ç³»ç»ŸåŒ…å«å®Œæ•´çš„å•å…ƒæµ‹è¯•å¥—ä»¶ï¼Œç¡®ä¿å„æ¨¡å—æ­£å¸¸å·¥ä½œï¼š

```python
# è¿è¡Œæµ‹è¯•ç¤ºä¾‹
import unittest
from tests.test_line_detection import TestLineDetection
from tests.test_red_filter import TestRedFilter

if __name__ == '__main__':
    unittest.main()
```

å…¸åž‹æµ‹è¯•ç”¨ä¾‹ï¼š

```python
class TestRedFilter(unittest.TestCase):
    def test_red_removal_simple(self):
        # æµ‹è¯•ç®€å•çº¢è‰²æ–‡æœ¬ç§»é™¤
        test_img = create_test_image_with_red_text()
        result = filter_red_content(test_img, test_output_dir, "test")
        self.assertTrue(np.sum(result[:,:,2] > 200) < 100)  # ç¡®ä¿çº¢è‰²é€šé“è¢«å¤„ç†
```

---

æ­¤è¡¨æ ¼ç»“æž„æå–ç³»ç»Ÿä¸ºæ–‡æ¡£å›¾åƒä¸­çš„è¡¨æ ¼è¯†åˆ«å’Œæå–æä¾›äº†å®Œæ•´è§£å†³æ–¹æ¡ˆï¼Œé€‚ç”¨äºŽå„ç§åº”ç”¨åœºæ™¯ï¼Œå…·æœ‰é«˜åº¦çš„å¯æ‰©å±•æ€§å’Œå¯å®šåˆ¶æ€§ã€‚é€šè¿‡å‚è€ƒæœ¬æ–‡æ¡£ï¼Œæ‚¨å¯ä»¥æ ¹æ®å®žé™…éœ€æ±‚é…ç½®å’Œä½¿ç”¨ç³»ç»Ÿï¼Œæˆ–è€…è¿›ä¸€æ­¥æ‰©å±•å…¶åŠŸèƒ½ã€‚
